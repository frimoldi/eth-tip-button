{"version":3,"file":"index.modern.js","sources":["../src/index.tsx"],"sourcesContent":["import React, { useState } from 'react'\nimport { ethers } from 'ethers'\nimport { CSSTransition } from 'react-transition-group'\n\nimport styles from './styles.module.scss'\n\ntype ButtonProps = {\n  recipientAddress: string\n  label: string\n  collapsedLabel: string\n  onTransactionSent?: (tx: ethers.providers.TransactionResponse) => void\n  onTransactionFinished?: (tx: ethers.providers.TransactionReceipt) => void\n  onError?: (error: Error) => void\n}\n\nexport const Button = ({\n  recipientAddress,\n  label,\n  collapsedLabel,\n  onTransactionSent,\n  onTransactionFinished,\n  onError\n}: ButtonProps) => {\n  const [isExpanded, setIsExpanded] = useState(true)\n  const [ethValue, setEthValue] = useState<number>(0.001)\n\n  const handleClick = async () => {\n    if (isExpanded) {\n      setIsExpanded(false)\n      return\n    }\n\n    try {\n      setIsExpanded(true)\n\n      const provider = new ethers.providers.Web3Provider(window.ethereum)\n      const accounts = await provider.listAccounts()\n\n      if (accounts.length === 0) {\n        await provider.send('eth_requestAccounts', [])\n      }\n\n      const signer = provider.getSigner()\n\n      const tx = await signer.sendTransaction({\n        to: recipientAddress,\n        value: ethers.utils.parseEther(`${ethValue}`)\n      })\n      onTransactionSent && onTransactionSent(tx)\n\n      const receipt = await tx.wait()\n      onTransactionFinished && onTransactionFinished(receipt)\n    } catch (error) {\n      onError && onError(error)\n    }\n  }\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    e.preventDefault()\n    setEthValue(e.target.valueAsNumber)\n  }\n\n  return (\n    <div className={styles.container}>\n      <input\n        className={styles.input}\n        type='number'\n        step={0.001}\n        value={ethValue}\n        onChange={handleChange}\n      />\n      <CSSTransition\n        in={!isExpanded}\n        timeout={200}\n        classNames={{\n          enterActive: styles.buttonEnterActive,\n          enterDone: styles.buttonEnterDone,\n          exitActive: styles.buttonExitActive,\n          exitDone: styles.buttonExitDone,\n          exit: styles.buttonExit\n        }}\n      >\n        <button className={styles.button} onClick={handleClick}>\n          {isExpanded ? label : collapsedLabel}\n        </button>\n      </CSSTransition>\n    </div>\n  )\n}\n"],"names":["Button","recipientAddress","label","collapsedLabel","onTransactionSent","onTransactionFinished","onError","isExpanded","setIsExpanded","useState","ethValue","setEthValue","handleClick","provider","ethers","providers","Web3Provider","window","ethereum","accounts","listAccounts","length","send","signer","getSigner","tx","sendTransaction","to","value","utils","parseEther","receipt","wait","error","handleChange","e","preventDefault","target","valueAsNumber","React","className","styles","container","input","type","step","onChange","CSSTransition","in","timeout","classNames","enterActive","buttonEnterActive","enterDone","buttonEnterDone","exitActive","buttonExitActive","exitDone","buttonExitDone","exit","buttonExit","button","onClick"],"mappings":";;;;;;MAeaA,MAAM,GAAG,CAAC;AACrBC,EAAAA,gBADqB;AAErBC,EAAAA,KAFqB;AAGrBC,EAAAA,cAHqB;AAIrBC,EAAAA,iBAJqB;AAKrBC,EAAAA,qBALqB;AAMrBC,EAAAA;AANqB,CAAD;AAQpB,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BC,QAAQ,CAAC,IAAD,CAA5C;AACA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BF,QAAQ,CAAS,KAAT,CAAxC;;AAEA,QAAMG,WAAW,GAAG;AAClB,QAAIL,UAAJ,EAAgB;AACdC,MAAAA,aAAa,CAAC,KAAD,CAAb;AACA;AACD;;AAED,QAAI;AACFA,MAAAA,aAAa,CAAC,IAAD,CAAb;AAEA,YAAMK,QAAQ,GAAG,IAAIC,MAAM,CAACC,SAAP,CAAiBC,YAArB,CAAkCC,MAAM,CAACC,QAAzC,CAAjB;AACA,YAAMC,QAAQ,GAAG,MAAMN,QAAQ,CAACO,YAAT,EAAvB;;AAEA,UAAID,QAAQ,CAACE,MAAT,KAAoB,CAAxB,EAA2B;AACzB,cAAMR,QAAQ,CAACS,IAAT,CAAc,qBAAd,EAAqC,EAArC,CAAN;AACD;;AAED,YAAMC,MAAM,GAAGV,QAAQ,CAACW,SAAT,EAAf;AAEA,YAAMC,EAAE,GAAG,MAAMF,MAAM,CAACG,eAAP,CAAuB;AACtCC,QAAAA,EAAE,EAAE1B,gBADkC;AAEtC2B,QAAAA,KAAK,EAAEd,MAAM,CAACe,KAAP,CAAaC,UAAb,IAA2BpB,UAA3B;AAF+B,OAAvB,CAAjB;AAIAN,MAAAA,iBAAiB,IAAIA,iBAAiB,CAACqB,EAAD,CAAtC;AAEA,YAAMM,OAAO,GAAG,MAAMN,EAAE,CAACO,IAAH,EAAtB;AACA3B,MAAAA,qBAAqB,IAAIA,qBAAqB,CAAC0B,OAAD,CAA9C;AACD,KApBD,CAoBE,OAAOE,KAAP,EAAc;AACd3B,MAAAA,OAAO,IAAIA,OAAO,CAAC2B,KAAD,CAAlB;AACD;AACF,GA7BD;;AA+BA,QAAMC,YAAY,GAAIC,CAAD;AACnBA,IAAAA,CAAC,CAACC,cAAF;AACAzB,IAAAA,WAAW,CAACwB,CAAC,CAACE,MAAF,CAASC,aAAV,CAAX;AACD,GAHD;;AAKA,SACEC,mBAAA,MAAA;AAAKC,IAAAA,SAAS,EAAEC,MAAM,CAACC;GAAvB,EACEH,mBAAA,QAAA;AACEC,IAAAA,SAAS,EAAEC,MAAM,CAACE;AAClBC,IAAAA,IAAI,EAAC;AACLC,IAAAA,IAAI,EAAE;AACNjB,IAAAA,KAAK,EAAElB;AACPoC,IAAAA,QAAQ,EAAEZ;GALZ,CADF,EAQEK,mBAAA,CAACQ,aAAD;AACEC,IAAAA,EAAE,EAAE,CAACzC;AACL0C,IAAAA,OAAO,EAAE;AACTC,IAAAA,UAAU,EAAE;AACVC,MAAAA,WAAW,EAAEV,MAAM,CAACW,iBADV;AAEVC,MAAAA,SAAS,EAAEZ,MAAM,CAACa,eAFR;AAGVC,MAAAA,UAAU,EAAEd,MAAM,CAACe,gBAHT;AAIVC,MAAAA,QAAQ,EAAEhB,MAAM,CAACiB,cAJP;AAKVC,MAAAA,IAAI,EAAElB,MAAM,CAACmB;AALH;GAHd,EAWErB,mBAAA,SAAA;AAAQC,IAAAA,SAAS,EAAEC,MAAM,CAACoB;AAAQC,IAAAA,OAAO,EAAElD;GAA3C,EACGL,UAAU,GAAGL,KAAH,GAAWC,cADxB,CAXF,CARF,CADF;AA0BD,CAzEM;;;;"}